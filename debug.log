
--------------------------------------------------------------------------------
-- Begin Convert-StringToToken
--------------------------------------------------------------------------------
Template is 51 characters
Template contains 2 lines
- Last line is ''
- Removing extra line at file end
- Now Template contains 1 lines

--------------------------------------------------------------------------------
-- Begin Set-StartPosition
--------------------------------------------------------------------------------
Set Index to 0
Set Line to 0
Set Column to 0

--------------------------------------------------------------------------------
-- End Set-StartPosition
--------------------------------------------------------------------------------
-- {{{ - Line 0 --
- Last line in content
- First line in content
Remove Carriage Return mark at index 49
Current line: '\ \ \ \ <%\ this\ is\ an\ element\ %>\ This\ is\ a\ basic\ test'
-- {{{ Indent :: default --
-- }}} --
Removing indent from line:
- line is '\ \ \ \ <%\ this\ is\ an\ element\ %>\ This\ is\ a\ basic\ test'
- indent is '\ \ \ \ '
- Line length: 49
- indent length: 4
line is now '<%\ this\ is\ an\ element\ %>\ This\ is\ a\ basic\ test'

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 4

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 4

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
Split line into 11 words
-- {{{ -Word '<%' --
+-- {{{ -Column (4)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ----^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (0) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    4
|- Column:    4
|- ---
|- Start:    Line: 0:0 - Index 0]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 1 of 11 in this line
|- Is first word:  True
|- Is last word:  
|- Previous word:  []
|- Current word:   [<%] <---
|- Next word:      [this]
|- ---
|- State:     TEXT
|- Content:   []
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: Start tag --
-- No characters found after start tag
Check condition when state is TEXT
-- {{{ START TAG :: default --
Content is empty

--------------------------------------------------------------------------------
-- Begin Set-StartPosition
--------------------------------------------------------------------------------
Set Index to 4
Set Line to 0
Set Column to 4

--------------------------------------------------------------------------------
-- End Set-StartPosition
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 5

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 5

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
+-- {{{ -Column (5)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -----^
+------------------------------------------------------ }}} --
STATE CHANGE: TEXT -> OPEN
-- }}} --
-- }}} --
- Store current word as prevWord
Finished scanning word [<%]
-- }}} --

-- {{{ -Word 'this' --
+-- {{{ -Column (5)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -----^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (1) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    5
|- Column:    5
|- ---
|- Start:    Line: 0:4 - Index 4]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 2 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [<%]
|- Current word:   [this] <---
|- Next word:      [is]
|- ---
|- State:     OPEN
|- Content:   []
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is OPEN
- state condition: OPEN
STATE CHANGE: OPEN -> ELMT
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 10

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 10

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [this]
-- }}} --

-- {{{ -Word 'is' --
+-- {{{ -Column (10)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ----------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (2) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    10
|- Column:    10
|- ---
|- Start:    Line: 0:4 - Index 4]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 3 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [this]
|- Current word:   [is] <---
|- Next word:      [an]
|- ---
|- State:     ELMT
|- Content:   [ this]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is ELMT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 13

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 13

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [is]
-- }}} --

-- {{{ -Word 'an' --
+-- {{{ -Column (13)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (3) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    13
|- Column:    13
|- ---
|- Start:    Line: 0:4 - Index 4]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 4 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [is]
|- Current word:   [an] <---
|- Next word:      [element]
|- ---
|- State:     ELMT
|- Content:   [ this is]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is ELMT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 16

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 16

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [an]
-- }}} --

-- {{{ -Word 'element' --
+-- {{{ -Column (16)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ----------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (4) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    16
|- Column:    16
|- ---
|- Start:    Line: 0:4 - Index 4]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 5 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [an]
|- Current word:   [element] <---
|- Next word:      [%>]
|- ---
|- State:     ELMT
|- Content:   [ this is an]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is ELMT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 24

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 24

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [element]
-- }}} --

-- {{{ -Word '%>' --
+-- {{{ -Column (24)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ------------------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (5) scanned in the input so far
|- Index:     0
|- Line:      0
|- Cursor:    24
|- Column:    24
|- ---
|- Start:    Line: 0:4 - Index 4]
|- End:      Line: 0:0 - Index 0]
|- ---
|- This is word 6 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [element]
|- Current word:   [%>] <---
|- Next word:      [This]
|- ---
|- State:     ELMT
|- Content:   [ this is an element]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: End Tag --
-- No characters found before end tag
Check condition when state is ELMT
-- {{{ END TAG :: default --
lexeme is [ %>]
- Advance the cursor and column by 3 to the end of the end tag
  - And remaining whitespace 0

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 27

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 27

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
+-- {{{ -Column (27)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ---------------------------^
+------------------------------------------------------ }}} --

--------------------------------------------------------------------------------
-- Begin Set-EndPosition
--------------------------------------------------------------------------------
Set Index to 27
Set Line to 0
Set Column to 27

--------------------------------------------------------------------------------
-- End Set-EndPosition
--------------------------------------------------------------------------------
**** Create Token ****

--------------------------------------------------------------------------------
-- Begin New-TemplateToken
Received : @{
    RemoveNewLine = $false
    Suffix = ''
    RemoveIndent = $false
    RemainingWhiteSpace = ''
    Type = 'elmt'
    Start = @{
        Line = 0
        Column = 4
        Index = 4
    }
    End = @{
        Line = 0
        Column = 27
        Index = 27
    }
    Content = ' this is an element '
    Prefix = ''
    Index = 0
    Indent = '    '
}

Creating Token 0: TokenInfo :
 @{
    End = @{
        Line = 0
        Column = 27
        Index = 27
    }
    Start = @{
        Line = 0
        Column = 4
        Index = 4
    }
    Indent = '    '
    Prefix = ''
    RemoveIndent = $false
    Length = 20
    Suffix = ''
    Index = 0
    RemoveNewLine = $false
    Content = ' this is an element '
    Type = 'ELMT'
    PSTypeName = 'Stencil.TemplateToken.Elmt'
    RemainingWhiteSpace = ''
}

-- End New-TemplateToken
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Reset-TokenOption
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- End Reset-TokenOption
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Set-StartPosition
--------------------------------------------------------------------------------
Set Index to 28
Set Line to 0
Set Column to 28

--------------------------------------------------------------------------------
-- End Set-StartPosition
--------------------------------------------------------------------------------
STATE CHANGE: ELMT -> CLOSE
--}}} --
-- }}} --
- Store current word as prevWord
Finished scanning word [%>]
-- }}} --

-- {{{ -Word 'This' --
+-- {{{ -Column (27)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  ---------------------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (6) scanned in the input so far
|- Index:     1
|- Line:      0
|- Cursor:    27
|- Column:    27
|- ---
|- Start:    Line: 0:28 - Index 28]
|- End:      Line: 0:27 - Index 27]
|- ---
|- This is word 7 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [%>]
|- Current word:   [This] <---
|- Next word:      [is]
|- ---
|- State:     CLOSE
|- Content:   []
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is CLOSE
- state condition: CLOSE
STATE CHANGE: CLOSE -> TEXT
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 32

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 32

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [This]
-- }}} --

-- {{{ -Word 'is' --
+-- {{{ -Column (32)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  --------------------------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (7) scanned in the input so far
|- Index:     1
|- Line:      0
|- Cursor:    32
|- Column:    32
|- ---
|- Start:    Line: 0:28 - Index 28]
|- End:      Line: 0:27 - Index 27]
|- ---
|- This is word 8 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [This]
|- Current word:   [is] <---
|- Next word:      [a]
|- ---
|- State:     TEXT
|- Content:   [ This]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is TEXT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 35

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 35

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [is]
-- }}} --

-- {{{ -Word 'a' --
+-- {{{ -Column (35)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -----------------------------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (8) scanned in the input so far
|- Index:     1
|- Line:      0
|- Cursor:    35
|- Column:    35
|- ---
|- Start:    Line: 0:28 - Index 28]
|- End:      Line: 0:27 - Index 27]
|- ---
|- This is word 9 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [is]
|- Current word:   [a] <---
|- Next word:      [basic]
|- ---
|- State:     TEXT
|- Content:   [ This is]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is TEXT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 37

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 37

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [a]
-- }}} --

-- {{{ -Word 'basic' --
+-- {{{ -Column (37)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -------------------------------------^
+------------------------------------------------------ }}} --
-- {{{ info block --
| This is word (9) scanned in the input so far
|- Index:     1
|- Line:      0
|- Cursor:    37
|- Column:    37
|- ---
|- Start:    Line: 0:28 - Index 28]
|- End:      Line: 0:27 - Index 27]
|- ---
|- This is word 10 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [a]
|- Current word:   [basic] <---
|- Next word:      [test]
|- ---
|- State:     TEXT
|- Content:   [ This is a]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is TEXT
- state condition: default
- Adding to content

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 43

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 43

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [basic]
-- }}} --

-- {{{ -Word 'test' --
+-- {{{ -Column (43)--------------------------------------
|- 0    5   10    15   20   25   30   35   40   45   50   55
|- |....|....|....|....|....|....|....|....|....|....|....|
|  <% this is an element %> This is a basic test
|  -------------------------------------------^
+------------------------------------------------------ }}} --
- Last word in line
-- {{{ info block --
| This is word (10) scanned in the input so far
|- Index:     1
|- Line:      0
|- Cursor:    43
|- Column:    43
|- ---
|- Start:    Line: 0:28 - Index 28]
|- End:      Line: 0:27 - Index 27]
|- ---
|- This is word 11 of 11 in this line
|- Is first word:  False
|- Is last word:  
|- Previous word:  [basic]
|- Current word:   [test] <---
|- Next word:      [
]
|- ---
|- State:     TEXT
|- Content:   [ This is a basic]
|- Prefix:    []
|- Suffix:    []
-- }}} --
-- {{{ SCAN: default ---------------------------------------------------------
Check condition when state is TEXT
- state condition: default
- Adding to content
- Add Carriage Return and Line Feed

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 50

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Move-Position
--------------------------------------------------------------------------------
Pointer now set to 50

--------------------------------------------------------------------------------
-- End Move-Position
--------------------------------------------------------------------------------
----------------------------------------------------------------------- }}} --
- Store current word as prevWord
Finished scanning word [test]
-- }}} --

END OF LINE
-- }}} --
END OF INPUT
- There is remaining content
Check condition when state is TEXT
- default

--------------------------------------------------------------------------------
-- Begin Set-EndPosition
--------------------------------------------------------------------------------
Set Index to 50
Set Line to 0
Set Column to 50

--------------------------------------------------------------------------------
-- End Set-EndPosition
--------------------------------------------------------------------------------
**** Create Token ****

--------------------------------------------------------------------------------
-- Begin New-TemplateToken
Received : @{
    RemoveNewLine = $false
    Suffix = ''
    RemoveIndent = $false
    RemainingWhiteSpace = ''
    Type = 'text'
    Start = @{
        Line = 0
        Column = 28
        Index = 28
    }
    End = @{
        Line = 0
        Column = 50
        Index = 50
    }
    Content = ' This is a basic test
'
    Prefix = ''
    Index = 1
    Indent = ''
}

Creating Token 1: TokenInfo :
 @{
    End = @{
        Line = 0
        Column = 50
        Index = 50
    }
    Start = @{
        Line = 0
        Column = 28
        Index = 28
    }
    Indent = ''
    Prefix = ''
    RemoveIndent = $false
    Length = 23
    Suffix = ''
    Index = 1
    RemoveNewLine = $false
    Content = ' This is a basic test
'
    Type = 'TEXT'
    PSTypeName = 'Stencil.TemplateToken.Text'
    RemainingWhiteSpace = ''
}

-- End New-TemplateToken
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Begin Reset-TokenOption
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- End Reset-TokenOption
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- End Convert-StringToToken
--------------------------------------------------------------------------------
